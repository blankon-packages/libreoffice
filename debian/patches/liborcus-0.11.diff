From b325b4c286b56a63316063a3ac4648bf7b7efcbe Mon Sep 17 00:00:00 2001
From: Kohei Yoshida <kohei.yoshida@gmail.com>
Date: Sat, 5 Mar 2016 20:09:34 -0500
Subject: [PATCH] Update liborcus to 0.11.0.

Markus did half of this, and I simply carried the torch.

Change-Id: Icd3ee1e4b5bd562faee06dfd9dce52a4bed49a71
Reviewed-on: https://gerrit.libreoffice.org/22943
Tested-by: Jenkins <ci@libreoffice.org>
Reviewed-by: Kohei Yoshida <libreoffice@kohei.us>
---
 RepositoryExternal.mk                              |   19 +-
 configure.ac                                       |    2 +-
 download.lst                                       |    4 +-
 external/boost/Module_boost.mk                     |    1 +
 external/boost/StaticLibrary_boost_filesystem.mk   |   36 +
 ...0001-Fix-for-OSX-build-inside-LibreOffice.patch | 1175 ++++++++++++++++++++
 .../liborcus/0001-Get-it-to-build-on-Windows.patch |  212 ++++
 external/liborcus/ExternalPackage_liborcus.mk      |    8 +-
 external/liborcus/ExternalProject_liborcus.mk      |   22 +-
 external/liborcus/Library_orcus-parser.mk          |    3 +
 external/liborcus/Library_orcus.mk                 |   18 +-
 external/liborcus/UnpackedTarball_liborcus.mk      |   11 +-
 external/liborcus/fix-crash-ooo55043-1.patch.0     |   17 -
 external/liborcus/unusedheader.patch.0             |   11 -
 external/liborcus/windows-constants-hack.patch     |   15 +
 sc/Library_scfilt.mk                               |    1 +
 sc/source/filter/inc/orcusinterface.hxx            |    2 +
 sc/source/filter/orcus/filterdetect.cxx            |    2 +-
 sc/source/filter/orcus/interface.cxx               |   63 +-
 19 files changed, 1544 insertions(+), 78 deletions(-)
 create mode 100644 external/boost/StaticLibrary_boost_filesystem.mk
 create mode 100644 external/liborcus/0001-Fix-for-OSX-build-inside-LibreOffice.patch
 create mode 100755 external/liborcus/0001-Get-it-to-build-on-Windows.patch
 delete mode 100644 external/liborcus/fix-crash-ooo55043-1.patch.0
 delete mode 100644 external/liborcus/unusedheader.patch.0
 create mode 100755 external/liborcus/windows-constants-hack.patch

diff --git a/RepositoryExternal.mk b/RepositoryExternal.mk
index 5b497ee..c6fe371 100644
--- a/RepositoryExternal.mk
+++ b/RepositoryExternal.mk
@@ -743,6 +743,21 @@ $(call gb_LinkTarget_set_include,$(1),\
 
 endef
 
+define gb_LinkTarget__use_boost_filesystem
+$(call gb_LinkTarget_add_defs,$(1),\
+	-DBOOST_ALL_NO_LIB \
+)
+
+$(call gb_LinkTarget_use_static_libraries,$(1),\
+	boost_filesystem \
+)
+
+endef
+
+define gb_ExternalProject__use_boost_filesystem
+$(call gb_ExternalProject_use_static_libraries,$(1),boost_filesystem)
+endef
+
 define gb_ExternalProject__use_boost_headers
 $(call gb_ExternalProject_use_unpacked,$(1),boost)
 
@@ -3129,7 +3144,7 @@ $(call gb_LinkTarget_set_include,$(1),\
 )
 
 $(call gb_LinkTarget_add_libs,$(1),\
-	-L$(call gb_UnpackedTarball_get_dir,liborcus)/src/liborcus/.libs -lorcus-0.10 \
+       -L$(call gb_UnpackedTarball_get_dir,liborcus)/src/liborcus/.libs -lorcus-0.11 \
 )
 
 $(if $(SYSTEM_BOOST), \
@@ -3148,7 +3163,7 @@ $(call gb_LinkTarget_set_include,$(1),\
 )
 
 $(call gb_LinkTarget_add_libs,$(1),\
-	-L$(call gb_UnpackedTarball_get_dir,liborcus)/src/parser/.libs -lorcus-parser-0.10 \
+	-L$(call gb_UnpackedTarball_get_dir,liborcus)/src/parser/.libs -lorcus-parser-0.11 \
 )
 
 endef
diff --git a/configure.ac b/configure.ac
index 934d43a..dab1919 100644
--- a/configure.ac
+++ b/configure.ac
@@ -9196,7 +9196,7 @@ if test -z "$enable_orcus" -o "$enable_orcus" != no; then
     ENABLE_ORCUS="TRUE"
     AC_DEFINE(ENABLE_ORCUS)
 
-    libo_CHECK_SYSTEM_MODULE([orcus],[ORCUS],[liborcus-0.10 >= 0.9.0])
+    libo_CHECK_SYSTEM_MODULE([orcus],[ORCUS],[liborcus-0.11 >= 0.11.0])
     if test "$with_system_orcus" != "yes"; then
         if test "$SYSTEM_BOOST" = "TRUE"; then
             # ===========================================================
diff --git a/download.lst b/download.lst
index 906a579..475112b 100644
--- a/download.lst
+++ b/download.lst
@@ -112,8 +112,8 @@
 export OPENLDAP_TARBALL := 804c6cb5698db30b75ad0ff1c25baefd-openldap-2.4.31.tgz
 export OPENSSL_MD5SUM := 9392e65072ce4b614c1392eefc1f23d0
 export OPENSSL_TARBALL := openssl-1.0.2h.tar.gz
-export ORCUS_MD5SUM := e6efcbe50a5fd4d50d513c9a7a4139b0
-export ORCUS_TARBALL := liborcus-0.9.2.tar.gz
+export ORCUS_MD5SUM := ca1e5d486b29cd519bb1d9845a6a768e
+export ORCUS_TARBALL := liborcus-0.11.0.tar.gz
 export OWNCLOUD_ANDROID_LIB_MD5SUM := 593f0aa47bf2efc0efda2d28fae063b2
 export OWNCLOUD_ANDROID_LIB_TARBALL := owncloud-android-library-0.9.4-no-binary-deps.tar.gz
 export PAGEMAKER_MD5SUM := 795cc7a59ace4db2b12586971d668671
diff --git a/external/boost/Module_boost.mk b/external/boost/Module_boost.mk
index 5bac25e..ae407f5 100644
--- a/external/boost/Module_boost.mk
+++ b/external/boost/Module_boost.mk
@@ -11,6 +11,7 @@ $(eval $(call gb_Module_Module,boost))
 
 $(eval $(call gb_Module_add_targets,boost,\
 	StaticLibrary_boostdatetime \
+	StaticLibrary_boost_filesystem \
 	StaticLibrary_boost_system \
 	StaticLibrary_boost_iostreams \
 	UnpackedTarball_boost \
diff --git a/external/boost/StaticLibrary_boost_filesystem.mk b/external/boost/StaticLibrary_boost_filesystem.mk
new file mode 100644
index 0000000..024308a
--- /dev/null
+++ b/external/boost/StaticLibrary_boost_filesystem.mk
@@ -0,0 +1,36 @@
+# -*- Mode: makefile-gmake; tab-width: 4; indent-tabs-mode: t -*-
+#
+# This file is part of the LibreOffice project.
+#
+# This Source Code Form is subject to the terms of the Mozilla Public
+# License, v. 2.0. If a copy of the MPL was not distributed with this
+# file, You can obtain one at http://mozilla.org/MPL/2.0/.
+#
+
+$(eval $(call gb_StaticLibrary_StaticLibrary,boost_filesystem))
+
+$(eval $(call gb_StaticLibrary_use_unpacked,boost_filesystem,boost))
+
+$(eval $(call gb_StaticLibrary_set_warnings_not_errors,boost_filesystem))
+
+# disable "auto link" "feature" on MSVC
+$(eval $(call gb_StaticLibrary_add_defs,boost_filesystem,\
+	-DBOOST_ALL_NO_LIB \
+))
+
+$(eval $(call gb_StaticLibrary_use_external,boost_filesystem,boost_headers))
+
+$(eval $(call gb_StaticLibrary_set_generated_cxx_suffix,boost_filesystem,cpp))
+
+$(eval $(call gb_StaticLibrary_add_generated_exception_objects,boost_filesystem,\
+	UnpackedTarball/boost/libs/filesystem/src/codecvt_error_category \
+	UnpackedTarball/boost/libs/filesystem/src/operations \
+	UnpackedTarball/boost/libs/filesystem/src/path \
+	UnpackedTarball/boost/libs/filesystem/src/path_traits \
+	UnpackedTarball/boost/libs/filesystem/src/portability \
+	UnpackedTarball/boost/libs/filesystem/src/unique_path \
+	UnpackedTarball/boost/libs/filesystem/src/utf8_codecvt_facet \
+	UnpackedTarball/boost/libs/filesystem/src/windows_file_codecvt \
+))
+
+# vim: set noet sw=4 ts=4:
diff --git a/external/liborcus/ExternalPackage_liborcus.mk b/external/liborcus/ExternalPackage_liborcus.mk
index 4411592..56debe9 100644
--- a/external/liborcus/ExternalPackage_liborcus.mk
+++ b/external/liborcus/ExternalPackage_liborcus.mk
@@ -12,11 +12,11 @@ $(eval $(call gb_ExternalPackage_ExternalPackage,liborcus,liborcus))
 $(eval $(call gb_ExternalPackage_use_external_project,liborcus,liborcus))
 
 ifeq ($(OS),MACOSX)
-$(eval $(call gb_ExternalPackage_add_file,liborcus,$(LIBO_LIB_FOLDER)/liborcus-0.10.0.dylib,src/liborcus/.libs/liborcus-0.10.0.dylib))
-$(eval $(call gb_ExternalPackage_add_file,liborcus,$(LIBO_LIB_FOLDER)/liborcus-parser-0.10.0.dylib,src/parser/.libs/liborcus-parser-0.10.0.dylib))
+$(eval $(call gb_ExternalPackage_add_file,liborcus,$(LIBO_LIB_FOLDER)/liborcus-0.11.0.dylib,src/liborcus/.libs/liborcus-0.11.0.dylib))
+$(eval $(call gb_ExternalPackage_add_file,liborcus,$(LIBO_LIB_FOLDER)/liborcus-parser-0.11.0.dylib,src/parser/.libs/liborcus-parser-0.11.0.dylib))
 else ifeq ($(DISABLE_DYNLOADING),)
-$(eval $(call gb_ExternalPackage_add_file,liborcus,$(LIBO_LIB_FOLDER)/liborcus-0.10.so.0,src/liborcus/.libs/liborcus-0.10.so.0.0.0))
-$(eval $(call gb_ExternalPackage_add_file,liborcus,$(LIBO_LIB_FOLDER)/liborcus-parser-0.10.so.0,src/parser/.libs/liborcus-parser-0.10.so.0.0.0))
+$(eval $(call gb_ExternalPackage_add_file,liborcus,$(LIBO_LIB_FOLDER)/liborcus-0.11.so.0,src/liborcus/.libs/liborcus-0.11.so.0.0.0))
+$(eval $(call gb_ExternalPackage_add_file,liborcus,$(LIBO_LIB_FOLDER)/liborcus-parser-0.11.so.0,src/parser/.libs/liborcus-parser-0.11.so.0.0.0))
 endif
 
 # vim: set noet sw=4 ts=4:
diff --git a/external/liborcus/ExternalProject_liborcus.mk b/external/liborcus/ExternalProject_liborcus.mk
index 7eb8fdb..580ef847 100644
--- a/external/liborcus/ExternalProject_liborcus.mk
+++ b/external/liborcus/ExternalProject_liborcus.mk
@@ -13,6 +13,7 @@ $(eval $(call gb_ExternalProject_use_autoconf,liborcus,build))
 
 $(eval $(call gb_ExternalProject_use_externals,liborcus, \
     boost_headers \
+    boost_filesystem \
     boost_iostreams \
     boost_system \
 	mdds_headers \
@@ -38,9 +39,9 @@ ifneq ($(SYSTEM_ZLIB),)
 liborcus_LIBS+=-lz
 endif
 ifneq ($(SYSTEM_BOOST),)
-liborcus_LIBS+=$(BOOST_SYSTEM_LIB) $(BOOST_IOSTREAMS_LIB)
+liborcus_LIBS+=$(BOOST_SYSTEM_LIB) $(BOOST_IOSTREAMS_LIB) $(BOOST_FILESYSTEM_LIB)
 else
-liborcus_LIBS+=-L$(gb_StaticLibrary_WORKDIR) -lboost_system -lboost_iostreams
+liborcus_LIBS+=-L$(gb_StaticLibrary_WORKDIR) -lboost_system -lboost_iostreams -lboost_filesystem
 endif
 ifeq ($(OS),ANDROID)
 liborcus_LIBS+=-lgnustl_shared -lm
@@ -96,12 +97,13 @@ $(call gb_ExternalProject_get_state_target,liborcus,build) :
 			, \
 				--enable-shared --disable-static \
 			) \
-			$(if $(ENABLE_DEBUG),--enable-debug,--disable-debug) \
-			--disable-spreadsheet-model \
-			--without-tools \
-			--disable-werror \
-			$(if $(filter MACOSX,$(OS)),--prefix=/@.__________________________________________________OOO) \
-			$(if $(SYSTEM_BOOST),,\
+                       $(if $(ENABLE_DEBUG),--enable-debug,--disable-debug) \
+                       --disable-spreadsheet-model \
+                       --without-tools \
+                       --disable-python \
+                       --disable-werror \
+                       $(if $(filter MACOSX,$(OS)),--prefix=/@.__________________________________________________OOO) \
+                       $(if $(SYSTEM_BOOST),,\
 				--with-boost=$(WORKDIR)/UnpackedTarball/boost \
 				boost_cv_lib_iostreams=yes \
 				boost_cv_lib_system=yes \
@@ -111,8 +113,8 @@ $(call gb_ExternalProject_get_state_target,liborcus,build) :
 		   $(MAKE) \
 		$(if $(filter MACOSX,$(OS)),\
 			&& $(PERL) $(SRCDIR)/solenv/bin/macosx-change-install-names.pl shl OOO \
-				$(gb_Package_SOURCEDIR_liborcus)/src/liborcus/.libs/liborcus-0.10.0.dylib \
-				$(gb_Package_SOURCEDIR_liborcus)/src/parser/.libs/liborcus-parser-0.10.0.dylib \
+				$(gb_Package_SOURCEDIR_liborcus)/src/liborcus/.libs/liborcus-0.11.0.dylib \
+				$(gb_Package_SOURCEDIR_liborcus)/src/parser/.libs/liborcus-parser-0.11.0.dylib \
 		) \
 	)
 
diff --git a/external/liborcus/Library_orcus-parser.mk b/external/liborcus/Library_orcus-parser.mk
index c3b4eec..28af14e 100644
--- a/external/liborcus/Library_orcus-parser.mk
+++ b/external/liborcus/Library_orcus-parser.mk
@@ -39,6 +39,8 @@ $(eval $(call gb_Library_add_generated_exception_objects,orcus-parser,\
 	UnpackedTarball/liborcus/src/parser/css_types \
 	UnpackedTarball/liborcus/src/parser/csv_parser_base \
 	UnpackedTarball/liborcus/src/parser/exception \
+	UnpackedTarball/liborcus/src/parser/json_parser_base \
+	UnpackedTarball/liborcus/src/parser/parser_base \
 	UnpackedTarball/liborcus/src/parser/parser_global \
 	UnpackedTarball/liborcus/src/parser/pstring \
 	UnpackedTarball/liborcus/src/parser/sax_parser_base \
@@ -48,6 +50,7 @@ $(eval $(call gb_Library_add_generated_exception_objects,orcus-parser,\
 	UnpackedTarball/liborcus/src/parser/tokens \
 	UnpackedTarball/liborcus/src/parser/types \
 	UnpackedTarball/liborcus/src/parser/xml_namespace \
+	UnpackedTarball/liborcus/src/parser/yaml_parser_base \
 	UnpackedTarball/liborcus/src/parser/zip_archive \
 	UnpackedTarball/liborcus/src/parser/zip_archive_stream \
 ))
diff --git a/external/liborcus/Library_orcus.mk b/external/liborcus/Library_orcus.mk
index ae98d5e..96169f1 100644
--- a/external/liborcus/Library_orcus.mk
+++ b/external/liborcus/Library_orcus.mk
@@ -13,6 +13,7 @@ $(eval $(call gb_Library_use_unpacked,orcus,liborcus))
 
 $(eval $(call gb_Library_use_externals,orcus,\
 	boost_headers \
+	boost_filesystem \
 	boost_iostreams \
 	boost_system \
 	mdds_headers \
@@ -53,12 +54,16 @@ $(eval $(call gb_Library_add_generated_exception_objects,orcus,\
 	UnpackedTarball/liborcus/src/liborcus/gnumeric_namespace_types \
 	UnpackedTarball/liborcus/src/liborcus/gnumeric_sheet_context \
 	UnpackedTarball/liborcus/src/liborcus/gnumeric_tokens \
+	UnpackedTarball/liborcus/src/liborcus/info \
 	UnpackedTarball/liborcus/src/liborcus/interface \
+	UnpackedTarball/liborcus/src/liborcus/json_document_tree \
+	UnpackedTarball/liborcus/src/liborcus/json_util \
 	UnpackedTarball/liborcus/src/liborcus/measurement \
+	UnpackedTarball/liborcus/src/liborcus/odf_helper \
 	UnpackedTarball/liborcus/src/liborcus/odf_namespace_types \
 	UnpackedTarball/liborcus/src/liborcus/odf_para_context \
-	UnpackedTarball/liborcus/src/liborcus/odf_styles \
 	UnpackedTarball/liborcus/src/liborcus/odf_styles_context \
+	UnpackedTarball/liborcus/src/liborcus/odf_styles \
 	UnpackedTarball/liborcus/src/liborcus/odf_tokens \
 	UnpackedTarball/liborcus/src/liborcus/ods_content_xml_context \
 	UnpackedTarball/liborcus/src/liborcus/ods_content_xml_handler \
@@ -73,18 +78,26 @@ $(eval $(call gb_Library_add_generated_exception_objects,orcus,\
 	UnpackedTarball/liborcus/src/liborcus/opc_reader \
 	UnpackedTarball/liborcus/src/liborcus/orcus_csv \
 	UnpackedTarball/liborcus/src/liborcus/orcus_gnumeric \
+	UnpackedTarball/liborcus/src/liborcus/orcus_import_ods \
+	UnpackedTarball/liborcus/src/liborcus/orcus_import_xlsx \
 	UnpackedTarball/liborcus/src/liborcus/orcus_ods \
 	UnpackedTarball/liborcus/src/liborcus/orcus_xlsx \
+	UnpackedTarball/liborcus/src/liborcus/orcus_xls_xml \
 	UnpackedTarball/liborcus/src/liborcus/orcus_xml \
 	UnpackedTarball/liborcus/src/liborcus/session_context \
 	UnpackedTarball/liborcus/src/liborcus/spreadsheet_interface \
 	UnpackedTarball/liborcus/src/liborcus/spreadsheet_types \
-	UnpackedTarball/liborcus/src/liborcus/xls_xml_namespace_types \
+	UnpackedTarball/liborcus/src/liborcus/string_helper \
 	UnpackedTarball/liborcus/src/liborcus/xlsx_autofilter_context \
 	UnpackedTarball/liborcus/src/liborcus/xlsx_conditional_format_context \
 	UnpackedTarball/liborcus/src/liborcus/xlsx_context \
 	UnpackedTarball/liborcus/src/liborcus/xlsx_handler \
 	UnpackedTarball/liborcus/src/liborcus/xlsx_helper \
+	UnpackedTarball/liborcus/src/liborcus/xls_xml_context \
+	UnpackedTarball/liborcus/src/liborcus/xls_xml_detection_handler \
+	UnpackedTarball/liborcus/src/liborcus/xls_xml_handler \
+	UnpackedTarball/liborcus/src/liborcus/xls_xml_namespace_types \
+	UnpackedTarball/liborcus/src/liborcus/xls_xml_tokens \
 	UnpackedTarball/liborcus/src/liborcus/xlsx_pivot_context \
 	UnpackedTarball/liborcus/src/liborcus/xlsx_revision_context \
 	UnpackedTarball/liborcus/src/liborcus/xlsx_session_data \
@@ -99,6 +112,7 @@ $(eval $(call gb_Library_add_generated_exception_objects,orcus,\
 	UnpackedTarball/liborcus/src/liborcus/xml_stream_handler \
 	UnpackedTarball/liborcus/src/liborcus/xml_stream_parser \
 	UnpackedTarball/liborcus/src/liborcus/xml_structure_tree \
+	UnpackedTarball/liborcus/src/liborcus/yaml_document_tree \
 ))
 
 # vim: set noet sw=4 ts=4:
diff --git a/external/liborcus/UnpackedTarball_liborcus.mk b/external/liborcus/UnpackedTarball_liborcus.mk
index 825fa49..0e337ef 100644
--- a/external/liborcus/UnpackedTarball_liborcus.mk
+++ b/external/liborcus/UnpackedTarball_liborcus.mk
@@ -16,8 +16,13 @@ $(eval $(call gb_UnpackedTarball_set_patchlevel,liborcus,1))
 $(eval $(call gb_UnpackedTarball_add_patches,liborcus,\
 	external/liborcus/0001-workaround-a-linking-problem-on-windows.patch \
 	external/liborcus/rpath.patch.0 \
-	external/liborcus/fix-crash-ooo55043-1.patch.0 \
-	external/liborcus/unusedheader.patch.0 \
 ))
 
+ifeq ($(OS),WNT)
+$(eval $(call gb_UnpackedTarball_add_patches,liborcus,\
+	external/liborcus/windows-constants-hack.patch \
+))
+endif
+
+
 # vim: set noet sw=4 ts=4:
diff --git a/external/liborcus/fix-crash-ooo55043-1.patch.0 b/external/liborcus/fix-crash-ooo55043-1.patch.0
deleted file mode 100644
index 58a97c0..0000000
--- a/external/liborcus/fix-crash-ooo55043-1.patch.0
+++ /dev/null
@@ -1,17 +0,0 @@
---- src/parser/zip_archive_stream.cpp
-+++ src/parser/zip_archive_stream.cpp
-@@ -91,8 +91,13 @@
- 
- void zip_archive_stream_blob::read(unsigned char* buffer, size_t length) const
- {
-+    if (!length)
-+        return;
-     // First, make sure we have enough blob to satisfy the requested stream length.
--    size_t length_available = m_size - tell();
-+    const size_t pos = tell();
-+    if (pos > m_size)
-+        throw zip_error("Stream is seeked past end. No data available");
-+    const size_t length_available = m_size - pos;
-     if (length_available < length)
-         throw zip_error("There is not enough stream left to fill requested length.");
- 
diff --git a/external/liborcus/unusedheader.patch.0 b/external/liborcus/unusedheader.patch.0
deleted file mode 100644
index 4f7a77b..0000000
--- a/external/liborcus/unusedheader.patch.0
+++ /dev/null
@@ -1,11 +0,0 @@
---- ./src/parser/pstring.cpp.orig	2015-12-02 14:38:44.658744408 +0000
-+++ ./src/parser/pstring.cpp	2015-12-02 14:38:50.449658497 +0000
-@@ -13,8 +13,6 @@
- #include <iostream>
- #include <vector>
- 
--#include <boost/thread/mutex.hpp>
--
- using namespace std;
- 
- namespace orcus {
diff --git a/external/liborcus/windows-constants-hack.patch b/external/liborcus/windows-constants-hack.patch
new file mode 100755
index 0000000..876bc16
--- /dev/null
+++ b/external/liborcus/windows-constants-hack.patch
@@ -0,0 +1,15 @@
+diff --git a/src/liborcus/info.cpp b/src/liborcus/info.cpp
+index ae571f5..539ce18 100644
+--- a/src/liborcus/info.cpp
++++ b/src/liborcus/info.cpp
+@@ -7,7 +7,9 @@
+ 
+ #include "orcus/info.hpp"
+ 
+-#include "constants.inl"
++#define ORCUS_MAJOR_VERSION 0
++#define ORCUS_MINOR_VERSION 11
++#define ORCUS_MICRO_VERSION 0
+ 
+ namespace orcus {
+ 
diff --git a/sc/Library_scfilt.mk b/sc/Library_scfilt.mk
index 74f2ce5..b764290 100644
--- a/sc/Library_scfilt.mk
+++ b/sc/Library_scfilt.mk
@@ -227,6 +227,7 @@ ifeq ($(ENABLE_ORCUS),TRUE)
 $(eval $(call gb_Library_use_externals,scfilt,\
 	orcus \
 	orcus-parser \
+	boost_filesystem \
 	boost_system \
 	boost_iostreams \
 	zlib \
diff --git a/sc/source/filter/inc/orcusinterface.hxx b/sc/source/filter/inc/orcusinterface.hxx
index 63b36ef..05fe4cb 100644
--- a/sc/source/filter/inc/orcusinterface.hxx
+++ b/sc/source/filter/inc/orcusinterface.hxx
@@ -375,6 +375,7 @@ public:
 
     virtual void set_border_count(size_t n) override;
     virtual void set_border_style(orcus::spreadsheet::border_direction_t dir, const char* s, size_t n) override;
+    virtual void set_border_style(orcus::spreadsheet::border_direction_t dir, orcus::spreadsheet::border_style_t style) override;
     virtual void set_border_color(orcus::spreadsheet::border_direction_t dir,
             orcus::spreadsheet::color_elem_t alpha,
             orcus::spreadsheet::color_elem_t red,
@@ -425,6 +426,7 @@ public:
     virtual void set_cell_style_name(const char* s, size_t n) override;
     virtual void set_cell_style_xf(size_t index) override;
     virtual void set_cell_style_builtin(size_t index) override;
+    virtual void set_cell_style_parent_name(const char* s, size_t n) override;
     virtual size_t commit_cell_style() override;
 };
 
diff --git a/sc/source/filter/orcus/filterdetect.cxx b/sc/source/filter/orcus/filterdetect.cxx
index 7dfccb9..9ae30ad 100644
--- a/sc/source/filter/orcus/filterdetect.cxx
+++ b/sc/source/filter/orcus/filterdetect.cxx
@@ -93,7 +93,7 @@ OUString OrcusFormatDetect::detect(css::uno::Sequence<css::beans::PropertyValue>
     }
 
     orcus::format_t eFormat = orcus::detect(reinterpret_cast<const unsigned char*>(aContent.getStr()), aContent.getLength());
-    if (eFormat == orcus::format_gnumeric)
+    if (eFormat == orcus::format_t::gnumeric)
         return OUString("Gnumeric XML");
 
     return OUString();
diff --git a/sc/source/filter/orcus/interface.cxx b/sc/source/filter/orcus/interface.cxx
index e50b8bf..496faea 100644
--- a/sc/source/filter/orcus/interface.cxx
+++ b/sc/source/filter/orcus/interface.cxx
@@ -55,7 +55,7 @@ void ScOrcusGlobalSettings::set_default_formula_grammar(orcus::spreadsheet::form
 
 orcus::spreadsheet::formula_grammar_t ScOrcusGlobalSettings::get_default_formula_grammar() const
 {
-    return orcus::spreadsheet::formula_grammar_unknown;
+    return orcus::spreadsheet::formula_grammar_t::unknown;
 }
 
 ScOrcusFactory::StringCellCache::StringCellCache(const ScAddress& rPos, size_t nIndex) :
@@ -231,19 +231,19 @@ double translateToInternal(double nVal, orcus::length_unit_t unit)
 {
     switch(unit)
     {
-        case orcus::length_unit_inch:
+        case orcus::length_unit_t::inch:
             return nVal * 72.0 * 20.0;
             break;
-        case orcus::length_unit_twip:
+        case orcus::length_unit_t::twip:
             return nVal;
             break;
-        case orcus::length_unit_point:
+        case orcus::length_unit_t::point:
             return nVal * 20.0;
             break;
-        case orcus::length_unit_centimeter:
+        case orcus::length_unit_t::centimeter:
             return nVal * 20.0 * 72.0 / 2.54;
             break;
-        case orcus::length_unit_unknown:
+        case orcus::length_unit_t::unknown:
             SAL_WARN("sc.orcus", "unknown unit");
             break;
         default:
@@ -393,18 +393,18 @@ void ScOrcusConditionalFormat::set_type(os::conditional_format_t type)
 {
     switch (type)
     {
-        case os::conditional_format_condition:
-        case os::conditional_format_formula:
+        case os::conditional_format_t::condition:
+        case os::conditional_format_t::formula:
             meEntryType = condformat::CONDITION;
             // mpCurrentEntry.reset(new ScCondFormatEntry());
         break;
-        case os::conditional_format_date:
+        case os::conditional_format_t::date:
         break;
-        case os::conditional_format_colorscale:
+        case os::conditional_format_t::colorscale:
         break;
-        case os::conditional_format_databar:
+        case os::conditional_format_t::databar:
         break;
-        case os::conditional_format_iconset:
+        case os::conditional_format_t::iconset:
         break;
         default:
             SAL_INFO("sc.orcus.condformat", "unknown conditional_format_t value");
@@ -549,17 +549,17 @@ formula::FormulaGrammar::Grammar getCalcGrammarFromOrcus( os::formula_grammar_t
     formula::FormulaGrammar::Grammar eGrammar = formula::FormulaGrammar::GRAM_ODFF;
     switch(grammar)
     {
-        case orcus::spreadsheet::formula_grammar_ods:
+        case orcus::spreadsheet::formula_grammar_t::ods:
             eGrammar = formula::FormulaGrammar::GRAM_ODFF;
             break;
-        case orcus::spreadsheet::formula_grammar_xlsx_2007:
-        case orcus::spreadsheet::formula_grammar_xlsx_2010:
+        case orcus::spreadsheet::formula_grammar_t::xlsx_2007:
+        case orcus::spreadsheet::formula_grammar_t::xlsx_2010:
             eGrammar = formula::FormulaGrammar::GRAM_OOXML;
             break;
-        case orcus::spreadsheet::formula_grammar_gnumeric:
+        case orcus::spreadsheet::formula_grammar_t::gnumeric:
             eGrammar = formula::FormulaGrammar::GRAM_ENGLISH_XL_A1;
             break;
-        case orcus::spreadsheet::formula_grammar_unknown:
+        case orcus::spreadsheet::formula_grammar_t::unknown:
             break;
     }
 
@@ -799,16 +799,16 @@ SvxBoxItemLine getDirection(os::border_direction_t dir)
 {
     switch (dir)
     {
-        case os::border_right:
+        case os::border_direction_t::right:
             return SvxBoxItemLine::RIGHT;
         break;
-        case os::border_left:
+        case os::border_direction_t::left:
             return SvxBoxItemLine::RIGHT;
         break;
-        case os::border_top:
+        case os::border_direction_t::top:
             return SvxBoxItemLine::RIGHT;
         break;
-        case os::border_bottom:
+        case os::border_direction_t::bottom:
             return SvxBoxItemLine::RIGHT;
         break;
         default:
@@ -947,15 +947,15 @@ void ScOrcusStyles::set_font_underline(orcus::spreadsheet::underline_t e)
 {
     switch(e)
     {
-        case orcus::spreadsheet::underline_single:
-        case orcus::spreadsheet::underline_single_accounting:
+        case orcus::spreadsheet::underline_t::single_line:
+        case orcus::spreadsheet::underline_t::single_accounting:
             maCurrentFont.meUnderline = UNDERLINE_SINGLE;
             break;
-        case orcus::spreadsheet::underline_double:
-        case orcus::spreadsheet::underline_double_accounting:
+        case orcus::spreadsheet::underline_t::double_line:
+        case orcus::spreadsheet::underline_t::double_accounting:
             maCurrentFont.meUnderline = UNDERLINE_DOUBLE;
             break;
-        case orcus::spreadsheet::underline_none:
+        case orcus::spreadsheet::underline_t::none:
             maCurrentFont.meUnderline = UNDERLINE_NONE;
             break;
     }
@@ -1019,6 +1019,12 @@ void ScOrcusStyles::set_border_style(orcus::spreadsheet::border_direction_t /*di
     // implement later
 }
 
+void ScOrcusStyles::set_border_style(
+    orcus::spreadsheet::border_direction_t /*dir*/, orcus::spreadsheet::border_style_t /*style*/)
+{
+    // implement later
+}
+
 void ScOrcusStyles::set_border_color(orcus::spreadsheet::border_direction_t dir,
             orcus::spreadsheet::color_elem_t alpha,
             orcus::spreadsheet::color_elem_t red,
@@ -1186,6 +1192,11 @@ void ScOrcusStyles::set_cell_style_builtin(size_t index)
     maCurrentCellStyle.mnBuiltInId = index;
 }
 
+void ScOrcusStyles::set_cell_style_parent_name(const char* /*s*/, size_t /*n*/)
+{
+    // place holder
+}
+
 size_t ScOrcusStyles::commit_cell_style()
 {
     SAL_INFO("sc.orcus.style", "commit cell style: " << maCurrentCellStyle.maName);
-- 
2.5.0

From d72a33c6aed0ca8f9fe0b90bc6d72e7313985524 Mon Sep 17 00:00:00 2001
From: David Tardon <dtardon@redhat.com>
Date: Tue, 8 Mar 2016 05:57:40 +0100
Subject: [PATCH 1/4] reorder

Change-Id: I8ff9f61475fddb475fe08e867c5446c825abb7dc
---
 RepositoryExternal.mk | 31 ++++++++++++++++---------------
 1 file changed, 16 insertions(+), 15 deletions(-)

diff --git a/RepositoryExternal.mk b/RepositoryExternal.mk
index c6fe371..c8aab64 100644
--- a/RepositoryExternal.mk
+++ b/RepositoryExternal.mk
@@ -704,6 +704,21 @@ $(call gb_LinkTarget_use_static_libraries,$(1),\
 
 endef
 
+define gb_LinkTarget__use_boost_filesystem
+$(call gb_LinkTarget_add_defs,$(1),\
+	-DBOOST_ALL_NO_LIB \
+)
+
+$(call gb_LinkTarget_use_static_libraries,$(1),\
+	boost_filesystem \
+)
+
+endef
+
+define gb_ExternalProject__use_boost_filesystem
+$(call gb_ExternalProject_use_static_libraries,$(1),boost_filesystem)
+endef
+
 define gb_LinkTarget__use_boost_iostreams
 $(call gb_LinkTarget_add_defs,$(1),\
 	-DBOOST_ALL_NO_LIB \
@@ -743,25 +758,11 @@ $(call gb_LinkTarget_set_include,$(1),\
 
 endef
 
-define gb_LinkTarget__use_boost_filesystem
-$(call gb_LinkTarget_add_defs,$(1),\
-	-DBOOST_ALL_NO_LIB \
-)
-
-$(call gb_LinkTarget_use_static_libraries,$(1),\
-	boost_filesystem \
-)
-
-endef
-
-define gb_ExternalProject__use_boost_filesystem
-$(call gb_ExternalProject_use_static_libraries,$(1),boost_filesystem)
-endef
-
 define gb_ExternalProject__use_boost_headers
 $(call gb_ExternalProject_use_unpacked,$(1),boost)
 
 endef
+
 endif # SYSTEM_BOOST
 
 
-- 
2.5.0

From 57c439a15e151fa9f7c298ceb15165749958c53c Mon Sep 17 00:00:00 2001
From: David Tardon <dtardon@redhat.com>
Date: Tue, 8 Mar 2016 06:06:36 +0100
Subject: [PATCH 2/4] reduce copypasta

Change-Id: I5303caf69128a0a6d28fccfcf2ab63ed466e3853
---
 RepositoryExternal.mk | 81 +++++++++++++--------------------------------------
 1 file changed, 21 insertions(+), 60 deletions(-)

diff --git a/RepositoryExternal.mk b/RepositoryExternal.mk
index c8aab64..58f924d 100644
--- a/RepositoryExternal.mk
+++ b/RepositoryExternal.mk
@@ -617,7 +617,7 @@ endif # SYSTEM_HUNSPELL
 
 ifneq ($(SYSTEM_BOOST),)
 
-define gb_LinkTarget__use_boostdatetime
+define gb_LinkTarget__use_boost_lib
 $(call gb_LinkTarget_set_include,$(1),\
 	$$(INCLUDE) \
 	$(BOOST_CPPFLAGS) \
@@ -627,43 +627,24 @@ $(call gb_LinkTarget_add_ldflags,$(1),\
 	$(BOOST_LDFLAGS) \
 )
 
-$(call gb_LinkTarget_add_libs,$(1),\
-	$(BOOST_DATE_TIME_LIB) \
-)
+$(call gb_LinkTarget_add_libs,$(1),$(2))
 
 endef
 
-define gb_LinkTarget__use_boost_iostreams
-$(call gb_LinkTarget_set_include,$(1),\
-	$$(INCLUDE) \
-	$(BOOST_CPPFLAGS) \
-)
+define gb_LinkTarget__use_boostdatetime
+$(call gb_LinkTarget__use_boost_lib,$(1),$(BOOST_DATE_TIME_LIB))
 
-$(call gb_LinkTarget_add_ldflags,$(1),\
-	$(BOOST_LDFLAGS) \
-)
+endef
 
-$(call gb_LinkTarget_add_libs,$(1),\
-	$(BOOST_IOSTREAMS_LIB) \
-)
+define gb_LinkTarget__use_boost_iostreams
+$(call gb_LinkTarget__use_boost_lib,$(1),$(BOOST_IOSTREAMS_LIB))
 
 endef
 
 gb_ExternalProject__use_boost_iostreams :=
 
 define gb_LinkTarget__use_boost_system
-$(call gb_LinkTarget_set_include,$(1),\
-	$$(INCLUDE) \
-	$(BOOST_CPPFLAGS) \
-)
-
-$(call gb_LinkTarget_add_ldflags,$(1),\
-	$(BOOST_LDFLAGS) \
-)
-
-$(call gb_LinkTarget_add_libs,$(1),\
-	$(BOOST_SYSTEM_LIB) \
-)
+$(call gb_LinkTarget__use_boost_lib,$(1),$(BOOST_SYSTEM_LIB))
 
 endef
 
@@ -681,37 +662,29 @@ gb_ExternalProject__use_boost_headers:=
 
 else # !SYSTEM_BOOST
 
-ifeq ($(OS),WNT)
-define gb_LinkTarget__use_boostthread
+define gb_LinkTarget__use_boost_lib
 $(call gb_LinkTarget_add_defs,$(1),\
 	-DBOOST_ALL_NO_LIB \
 )
 
-$(call gb_LinkTarget_use_static_libraries,$(1),\
-	boostthread \
-)
+$(call gb_LinkTarget_use_static_libraries,$(1),$(2))
+
+endef
+
+ifeq ($(OS),WNT)
+define gb_LinkTarget__use_boostthread
+$(call gb_LinkTarget__use_boost_lib,$(1),boostthread)
+
 endef
 endif
 
 define gb_LinkTarget__use_boostdatetime
-$(call gb_LinkTarget_add_defs,$(1),\
-	-DBOOST_ALL_NO_LIB \
-)
-
-$(call gb_LinkTarget_use_static_libraries,$(1),\
-	boostdatetime \
-)
+$(call gb_LinkTarget__use_boost_lib,$(1),boostdatetime)
 
 endef
 
 define gb_LinkTarget__use_boost_filesystem
-$(call gb_LinkTarget_add_defs,$(1),\
-	-DBOOST_ALL_NO_LIB \
-)
-
-$(call gb_LinkTarget_use_static_libraries,$(1),\
-	boost_filesystem \
-)
+$(call gb_LinkTarget__use_boost_lib,$(1),boost_filesystem)
 
 endef
 
@@ -720,13 +693,7 @@ $(call gb_ExternalProject_use_static_libraries,$(1),boost_filesystem)
 endef
 
 define gb_LinkTarget__use_boost_iostreams
-$(call gb_LinkTarget_add_defs,$(1),\
-	-DBOOST_ALL_NO_LIB \
-)
-
-$(call gb_LinkTarget_use_static_libraries,$(1),\
-	boost_iostreams \
-)
+$(call gb_LinkTarget__use_boost_lib,$(1),boost_iostreams)
 
 endef
 
@@ -735,13 +702,7 @@ $(call gb_ExternalProject_use_static_libraries,$(1),boost_iostreams)
 endef
 
 define gb_LinkTarget__use_boost_system
-$(call gb_LinkTarget_add_defs,$(1),\
-	-DBOOST_ALL_NO_LIB \
-)
-
-$(call gb_LinkTarget_use_static_libraries,$(1),\
-	boost_system \
-)
+$(call gb_LinkTarget__use_boost_lib,$(1),boost_system)
 
 endef
 
-- 
2.5.0

From ed41a33ca22f46b123df4132d376247682af07af Mon Sep 17 00:00:00 2001
From: David Tardon <dtardon@redhat.com>
Date: Tue, 8 Mar 2016 06:23:24 +0100
Subject: [PATCH 3/4] detect Boost.Filesystem

Change-Id: I86c268f49f44bd1e208a9de781a16bf19450c64c
---
 config_host.mk.in         |   1 +
 configure.ac              |   1 +
 m4/ax_boost_filesystem.m4 | 118 ++++++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 120 insertions(+)
 create mode 100644 m4/ax_boost_filesystem.m4

diff --git a/config_host.mk.in b/config_host.mk.in
index 89081ca..0a2ec0b 100644
--- a/config_host.mk.in
+++ b/config_host.mk.in
@@ -37,6 +37,7 @@ export BARCODE_EXTENSION_PACK=@BARCODE_EXTENSION_PACK@
 export BOOST_CPPFLAGS=@BOOST_CPPFLAGS@
 export BOOST_CXXFLAGS=@BOOST_CXXFLAGS@
 export BOOST_DATE_TIME_LIB=@BOOST_DATE_TIME_LIB@
+export BOOST_FILESYSTEM_LIB=@BOOST_FILESYSTEM_LIB@
 export BOOST_IOSTREAMS_LIB=@BOOST_IOSTREAMS_LIB@
 export BOOST_LDFLAGS=@BOOST_LDFLAGS@
 export BOOST_SYSTEM_LIB=@BOOST_SYSTEM_LIB@
diff --git a/configure.ac b/configure.ac
index dab1919..7b5cedd 100644
--- a/configure.ac
+++ b/configure.ac
@@ -8836,6 +8836,7 @@ if test "$with_system_boost" = "yes"; then
     SYSTEM_BOOST=TRUE
     AX_BOOST_BASE(1.47)
     AX_BOOST_DATE_TIME
+    AX_BOOST_FILESYSTEM
     AX_BOOST_IOSTREAMS
     mingw_boost_date_time_dll=`echo $BOOST_DATE_TIME_LIB | sed -e 's/^-l//' -e 's/\.dll$//'`
     libo_MINGW_TRY_DLL([$mingw_boost_date_time_dll])
diff --git a/m4/ax_boost_filesystem.m4 b/m4/ax_boost_filesystem.m4
new file mode 100644
index 0000000..f162163
--- /dev/null
+++ b/m4/ax_boost_filesystem.m4
@@ -0,0 +1,118 @@
+# ===========================================================================
+#    http://www.gnu.org/software/autoconf-archive/ax_boost_filesystem.html
+# ===========================================================================
+#
+# SYNOPSIS
+#
+#   AX_BOOST_FILESYSTEM
+#
+# DESCRIPTION
+#
+#   Test for Filesystem library from the Boost C++ libraries. The macro
+#   requires a preceding call to AX_BOOST_BASE. Further documentation is
+#   available at <http://randspringer.de/boost/index.html>.
+#
+#   This macro calls:
+#
+#     AC_SUBST(BOOST_FILESYSTEM_LIB)
+#
+#   And sets:
+#
+#     HAVE_BOOST_FILESYSTEM
+#
+# LICENSE
+#
+#   Copyright (c) 2009 Thomas Porschberg <thomas@randspringer.de>
+#   Copyright (c) 2009 Michael Tindal
+#   Copyright (c) 2009 Roman Rybalko <libtorrent@romanr.info>
+#
+#   Copying and distribution of this file, with or without modification, are
+#   permitted in any medium without royalty provided the copyright notice
+#   and this notice are preserved. This file is offered as-is, without any
+#   warranty.
+
+#serial 26
+
+AC_DEFUN([AX_BOOST_FILESYSTEM],
+[
+	AC_ARG_WITH([boost-filesystem],
+	AS_HELP_STRING([--with-boost-filesystem@<:@=special-lib@:>@],
+                   [use the Filesystem library from boost - it is possible to specify a certain library for the linker
+                        e.g. --with-boost-filesystem=boost_filesystem-gcc-mt ]),
+        [
+        if test "$withval" = "no"; then
+			want_boost="no"
+        elif test "$withval" = "yes"; then
+            want_boost="yes"
+            ax_boost_user_filesystem_lib=""
+        else
+		    want_boost="yes"
+		ax_boost_user_filesystem_lib="$withval"
+		fi
+        ],
+        [want_boost="yes"]
+	)
+
+	if test "x$want_boost" = "xyes"; then
+        AC_REQUIRE([AC_PROG_CC])
+		CPPFLAGS_SAVED="$CPPFLAGS"
+		CPPFLAGS="$CPPFLAGS $BOOST_CPPFLAGS"
+		export CPPFLAGS
+
+		LDFLAGS_SAVED="$LDFLAGS"
+		LDFLAGS="$LDFLAGS $BOOST_LDFLAGS"
+		export LDFLAGS
+
+		LIBS_SAVED=$LIBS
+		LIBS="$LIBS $BOOST_SYSTEM_LIB"
+		export LIBS
+
+        AC_CACHE_CHECK(whether the Boost::Filesystem library is available,
+					   ax_cv_boost_filesystem,
+        [AC_LANG_PUSH([C++])
+         AC_COMPILE_IFELSE([AC_LANG_PROGRAM([[@%:@include <boost/filesystem/path.hpp>]],
+                                   [[using namespace boost::filesystem;
+                                   path my_path( "foo/bar/data.txt" );
+                                   return 0;]])],
+					       ax_cv_boost_filesystem=yes, ax_cv_boost_filesystem=no)
+         AC_LANG_POP([C++])
+		])
+		if test "x$ax_cv_boost_filesystem" = "xyes"; then
+			AC_DEFINE(HAVE_BOOST_FILESYSTEM,,[define if the Boost::Filesystem library is available])
+            BOOSTLIBDIR=`echo $BOOST_LDFLAGS | sed -e 's/@<:@^\/@:>@*//'`
+            if test "x$ax_boost_user_filesystem_lib" = "x"; then
+                for libextension in `ls -r $BOOSTLIBDIR/libboost_filesystem* 2>/dev/null | sed 's,.*/lib,,' | sed 's,\..*,,'` ; do
+                     ax_lib=${libextension}
+				    AC_CHECK_LIB($ax_lib, exit,
+                                 [BOOST_FILESYSTEM_LIB="-l$ax_lib"; AC_SUBST(BOOST_FILESYSTEM_LIB) link_filesystem="yes"; break],
+                                 [link_filesystem="no"])
+				done
+                if test "x$link_filesystem" != "xyes"; then
+                for libextension in `ls -r $BOOSTLIBDIR/boost_filesystem* 2>/dev/null | sed 's,.*/,,' | sed -e 's,\..*,,'` ; do
+                     ax_lib=${libextension}
+				    AC_CHECK_LIB($ax_lib, exit,
+                                 [BOOST_FILESYSTEM_LIB="-l$ax_lib"; AC_SUBST(BOOST_FILESYSTEM_LIB) link_filesystem="yes"; break],
+                                 [link_filesystem="no"])
+				done
+		    fi
+            else
+               for ax_lib in $ax_boost_user_filesystem_lib boost_filesystem-$ax_boost_user_filesystem_lib; do
+				      AC_CHECK_LIB($ax_lib, exit,
+                                   [BOOST_FILESYSTEM_LIB="-l$ax_lib"; AC_SUBST(BOOST_FILESYSTEM_LIB) link_filesystem="yes"; break],
+                                   [link_filesystem="no"])
+                  done
+
+            fi
+            if test "x$ax_lib" = "x"; then
+                AC_MSG_ERROR(Could not find a version of the library!)
+            fi
+			if test "x$link_filesystem" != "xyes"; then
+				AC_MSG_ERROR(Could not link against $ax_lib !)
+			fi
+		fi
+
+		CPPFLAGS="$CPPFLAGS_SAVED"
+		LDFLAGS="$LDFLAGS_SAVED"
+		LIBS="$LIBS_SAVED"
+	fi
+])
-- 
2.5.0

From b4339fa7eee12f173b2273aed5dc6b8abae528f4 Mon Sep 17 00:00:00 2001
From: David Tardon <dtardon@redhat.com>
Date: Tue, 8 Mar 2016 06:08:36 +0100
Subject: [PATCH 4/4] define boost_filestystem external for system boost too

Change-Id: Ie9bfc6a5f3e1862acbd1bb08c6f2bb0b63f2587e
---
 RepositoryExternal.mk | 7 +++++++
 1 file changed, 7 insertions(+)

diff --git a/RepositoryExternal.mk b/RepositoryExternal.mk
index 58f924d..ca7cdf8 100644
--- a/RepositoryExternal.mk
+++ b/RepositoryExternal.mk
@@ -636,6 +636,13 @@ $(call gb_LinkTarget__use_boost_lib,$(1),$(BOOST_DATE_TIME_LIB))
 
 endef
 
+define gb_LinkTarget__use_boost_filesystem
+$(call gb_LinkTarget__use_boost_lib,$(1),$(BOOST_FILESYSTEM_LIB))
+
+endef
+
+gb_ExternalProject__use_boost_filesystem :=
+
 define gb_LinkTarget__use_boost_iostreams
 $(call gb_LinkTarget__use_boost_lib,$(1),$(BOOST_IOSTREAMS_LIB))
 
-- 
2.5.0

